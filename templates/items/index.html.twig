{% extends 'base.html.twig' %}

{% block title %}Hello ItemsCollectionsController!{% endblock %}

{% block body %}
<style>
    .example-wrapper {
        margin: 1em auto;
        max-width: 800px;
        width: 95%;
        font: 18px/1.5 sans-serif;
    }

    .example-wrapper code {
        background: #F5F5F5;
        padding: 2px 6px;
    }
</style>
<div class="container">
    <div class="col-md-6 col-md-offset-3 well mx-auto">
        <div class="row">
            <h1 class="text-center">Add new item </h1>
            <div class="form-group">

                {{ form_start(items_form) }}

                <div class="mb-3">
                    {{ form_row(items_form.name, {
                        'attr': {'class': 'form-control'}
                    }) }}
                </div>
                <div class="mb-3">
                    <ul>
                        {% for tag in items_form.tags %}
                        <li>{{ form_errors(tag) }}</li>
                        <li>{{ form_widget(tag) }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {#<div class="md-3">
                    <ul id="tag_list">
                        data-prototype = "{{ form_widget(items_form.tags.vars.prototype)|e }}"
                        data-widget-type = "{{ '<li></li>'|e }}"
                        data-widget-counter = "{{ items_form.tags|length }}"

                        <li>
                            {% for tag in items_form.tags %}#}{#
                            {{ form_errors(tag) }}
                            {{ form_widget(tag) }}
                            {% endfor %}
                        </li>
                    </ul>
                    <button type="button"
                    class="add-collection-widget"
                    data-list-selector="#tag_list">Add another tag</button>
                </div>#}

                {{ form_end(items_form) }}
            </div>
        </div>
    </div>
</div>
    {#<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script>
        jQuery(document).ready(function () {
            jQuery('.add-collection-widget').click(function (e){
                let list = jQuery(jQuery(this).attr('data-list-selector'));

                let counter = list.data('widget-counter') || list.children().length;

                let newWidget = list.attr('data-prototype');
                newWidget = newWidget.replace(/__name__/g, counter);

                counter++;

                list.data('widget-counter', counter);

                let newElement = jQuery(list.attr('data-widget-tag')).html(newWidget);
                newElement.appendTo(list);
            })
        })
    </script>#}

{% endblock %}
